import brownie
import pytest
from brownie import accounts
from brownie.test import given, strategy


def test_empty_encode_actions(argobytes_atomic_trade):
    encoded_actions = argobytes_atomic_trade.encodeActions(
        [],
        [],
    )

    expected = "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000"

    assert encoded_actions == expected


def test_encode_approve_action(argobytes_atomic_trade, usdc_erc20, dai_erc20):

    approve_dai = dai_erc20.approve.encode_input(argobytes_atomic_trade, 1e18)
    approve_usdc = usdc_erc20.approve.encode_input(argobytes_atomic_trade, 1e18)

    encoded_actions = argobytes_atomic_trade.encodeActions(
        [dai_erc20, usdc_erc20],
        [approve_dai, approve_usdc],
    )

    expected = "0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001000000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000044095ea7b300000000000000000000000004246faa61004668e1c0a388a3bf60e67827a17e0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000044095ea7b300000000000000000000000004246faa61004668e1c0a388a3bf60e67827a17e0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000"

    assert encoded_actions == expected
